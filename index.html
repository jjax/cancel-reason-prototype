<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>MealSub - Cancel Subscription Prototype</title>
<style>
* { margin: 0; padding: 0; box-sizing: border-box; }
body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; background: #f0f0f0; min-height: 100vh; display: flex; justify-content: center; }
.page { width: 100%; max-width: 420px; background: #f5f5f5; min-height: 100vh; position: relative; }
header { background: #fff; padding: 12px 16px; display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid #eee; }
header .logo { color: #e63900; font-weight: 800; font-size: 18px; }
header .user { display: flex; align-items: center; gap: 6px; font-size: 13px; color: #333; }
header .avatar { width: 28px; height: 28px; border-radius: 50%; background: #ddd; }
.content { padding: 16px; }
.card { background: #fff; border-radius: 12px; padding: 20px; margin-bottom: 16px; box-shadow: 0 1px 3px rgba(0,0,0,0.06); }
.card h2 { font-size: 16px; font-weight: 700; margin-bottom: 14px; }
.row { display: flex; justify-content: space-between; font-size: 13px; padding: 6px 0; color: #444; }
.row .label { color: #333; font-weight: 600; }
.btn-cancel-sub { width: 100%; padding: 14px; border: 2px solid #c0392b; background: #fff; color: #c0392b; font-size: 15px; font-weight: 600; border-radius: 10px; cursor: pointer; margin-top: 8px; }
.btn-cancel-sub:hover { background: #fdf2f2; }

/* Modal overlay */
.overlay { display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.45); z-index: 100; justify-content: center; align-items: center; }
.overlay.active { display: flex; }

/* Modal */
.modal { background: #fffdf5; border-radius: 16px; width: 90%; max-width: 380px; padding: 24px; position: relative; box-shadow: 0 8px 32px rgba(0,0,0,0.18); animation: slideUp .25s ease; }
@keyframes slideUp { from { transform: translateY(30px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
.modal-close { position: absolute; top: 12px; right: 14px; background: none; border: none; font-size: 22px; cursor: pointer; color: #999; line-height: 1; }
.modal-header { display: flex; align-items: center; gap: 8px; margin-bottom: 12px; }
.modal-header .icon { font-size: 20px; }
.modal-header h3 { color: #c0392b; font-size: 16px; font-weight: 700; }
.modal p { font-size: 13.5px; color: #555; line-height: 1.5; margin-bottom: 16px; }

/* Step 1: confirm */
.btn-yes { width: 100%; padding: 14px; background: #e74c3c; color: #fff; border: none; border-radius: 10px; font-size: 15px; font-weight: 600; cursor: pointer; margin-bottom: 10px; }
.btn-yes:hover { background: #d43f2f; }
.btn-no { width: 100%; padding: 14px; background: #fff; color: #e8a030; border: 2px solid #e8a030; border-radius: 10px; font-size: 15px; font-weight: 600; cursor: pointer; }
.btn-no:hover { background: #fffbf0; }

/* Step 2: reason */
.reason-list { list-style: none; margin-bottom: 18px; }
.reason-list li { margin-bottom: 8px; }
.reason-list label { display: flex; align-items: center; gap: 10px; padding: 12px 14px; border: 2px solid #e0e0e0; border-radius: 10px; font-size: 14px; color: #333; cursor: pointer; transition: all .15s; }
.reason-list label:hover { border-color: #e8a030; background: #fffdf5; }
.reason-list input[type="radio"] { accent-color: #e74c3c; width: 18px; height: 18px; flex-shrink: 0; }
.reason-list input[type="radio"]:checked + span { font-weight: 600; }
.reason-list label:has(input:checked) { border-color: #e74c3c; background: #fef5f4; }
.reason-other-text { width: 100%; margin-top: 8px; padding: 10px; border: 1px solid #ccc; border-radius: 8px; font-size: 13px; resize: vertical; min-height: 60px; display: none; }
.reason-other-text.visible { display: block; }
.btn-submit-reason { width: 100%; padding: 14px; background: #e74c3c; color: #fff; border: none; border-radius: 10px; font-size: 15px; font-weight: 600; cursor: pointer; opacity: 0.4; pointer-events: none; transition: opacity .2s; }
.btn-submit-reason.enabled { opacity: 1; pointer-events: auto; cursor: pointer; }
.btn-submit-reason.enabled:hover { background: #d43f2f; }
.btn-back { width: 100%; padding: 14px; background: #fff; color: #888; border: 1px solid #ddd; border-radius: 10px; font-size: 14px; cursor: pointer; margin-top: 8px; }

/* Step 3: done */
.done-icon { font-size: 40px; text-align: center; margin-bottom: 12px; }
.done-msg { text-align: center; font-size: 15px; color: #333; line-height: 1.6; margin-bottom: 20px; }
.btn-close-done { width: 100%; padding: 14px; background: #e8a030; color: #fff; border: none; border-radius: 10px; font-size: 15px; font-weight: 600; cursor: pointer; }
</style>
</head>
<body>
<div class="page">
  <header>
    <div class="logo">MealSub</div>
    <div class="user"><div class="avatar"></div> Jujin Sato â–¾</div>
  </header>
  <div class="content">
    <div class="card">
      <h2>Subscription Summary</h2>
      <div class="row"><span class="label">Delivery Schedule</span><span>Every Sunday, 18:00-21:00</span></div>
      <div class="row"><span class="label">Monthly Subscription</span><span>SGD 140.00 / month</span></div>
      <div class="row"><span class="label">Delivery Fee</span><span>Free</span></div>
    </div>
    <div class="card">
      <h2>Account Actions</h2>
      <button class="btn-cancel-sub" onclick="openModal()">Cancel Subscription</button>
    </div>
  </div>
</div>

<!-- Modal overlay -->
<div class="overlay" id="overlay">
  <div class="modal">
    <button class="modal-close" onclick="closeModal()">âœ•</button>

    <!-- Step 1: Confirm -->
    <div id="step1">
      <div class="modal-header"><span class="icon">âš ï¸</span><h3>Cancel Subscription?</h3></div>
      <p>Are you sure you want to cancel your subscription?<br>Your subscription will remain active until the end of the scheduled delivery.</p>
      <button class="btn-yes" onclick="goStep(2)">Yes, Cancel Subscription</button>
      <button class="btn-no" onclick="closeModal()">No, Keep Subscription</button>
    </div>

    <!-- Step 2: Reason -->
    <div id="step2" style="display:none">
      <div class="modal-header"><span class="icon">ğŸ“‹</span><h3>ã‚­ãƒ£ãƒ³ã‚»ãƒ«ã®ç†ç”±ã‚’æ•™ãˆã¦ãã ã•ã„</h3></div>
      <p>ä»Šå¾Œã®ã‚µãƒ¼ãƒ“ã‚¹æ”¹å–„ã®ãŸã‚ã€ã‚­ãƒ£ãƒ³ã‚»ãƒ«ç†ç”±ã‚’ãŠèã‹ã›ãã ã•ã„ã€‚</p>
      <ul class="reason-list">
        <li><label><input type="radio" name="reason" value="price" onchange="onReasonChange()"><span>æ–™é‡‘ãŒé«˜ã„</span></label></li>
        <li><label><input type="radio" name="reason" value="taste" onchange="onReasonChange()"><span>å‘³ãŒåˆã‚ãªã‹ã£ãŸ</span></label></li>
        <li><label><input type="radio" name="reason" value="schedule" onchange="onReasonChange()"><span>é…é”ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ãŒåˆã‚ãªã„</span></label></li>
        <li><label><input type="radio" name="reason" value="variety" onchange="onReasonChange()"><span>ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã®ãƒãƒªã‚¨ãƒ¼ã‚·ãƒ§ãƒ³ãŒå°‘ãªã„</span></label></li>
        <li><label><input type="radio" name="reason" value="other" onchange="onReasonChange()"><span>ãã®ä»–</span></label></li>
      </ul>
      <textarea class="reason-other-text" id="otherText" placeholder="ç†ç”±ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„â€¦"></textarea>
      <button class="btn-submit-reason" id="btnSubmit" onclick="goStep(3)">ã‚­ãƒ£ãƒ³ã‚»ãƒ«ã‚’ç¢ºå®šã™ã‚‹</button>
      <button class="btn-back" onclick="goStep(1)">æˆ»ã‚‹</button>
    </div>

    <!-- Step 3: Done -->
    <div id="step3" style="display:none">
      <div class="done-icon">âœ…</div>
      <div class="done-msg">ã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³ã®ã‚­ãƒ£ãƒ³ã‚»ãƒ«ãŒ<br>å®Œäº†ã—ã¾ã—ãŸã€‚<br><br><small style="color:#888">ã”åˆ©ç”¨ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã—ãŸã€‚<br>æ¬¡å›ã®é…é”äºˆå®šæ—¥ã¾ã§ã¯ã”åˆ©ç”¨ã„ãŸã ã‘ã¾ã™ã€‚</small></div>
      <button class="btn-close-done" onclick="closeModal()">é–‰ã˜ã‚‹</button>
    </div>
  </div>
</div>

<script>
function openModal() { document.getElementById('overlay').classList.add('active'); goStep(1); }
function closeModal() { document.getElementById('overlay').classList.remove('active'); resetForm(); }

function goStep(n) {
  document.getElementById('step1').style.display = n===1 ? 'block' : 'none';
  document.getElementById('step2').style.display = n===2 ? 'block' : 'none';
  document.getElementById('step3').style.display = n===3 ? 'block' : 'none';
}

function onReasonChange() {
  const selected = document.querySelector('input[name="reason"]:checked');
  const otherText = document.getElementById('otherText');
  const btn = document.getElementById('btnSubmit');
  otherText.classList.toggle('visible', selected && selected.value === 'other');
  btn.classList.toggle('enabled', !!selected);
}

function resetForm() {
  document.querySelectorAll('input[name="reason"]').forEach(r => r.checked = false);
  document.getElementById('otherText').value = '';
  document.getElementById('otherText').classList.remove('visible');
  document.getElementById('btnSubmit').classList.remove('enabled');
}
</script>
</body>
</html>
